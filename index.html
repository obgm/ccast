<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Constrained-Cast: Source-Routed Multicast for RPL</title>

  
<style type="text/css">/*<![CDATA[*/
@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}

@media screen and (min-width: 1024px) {
  ul.toc, #rfc\.toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 500px);
    width: 300px;
    padding: 0 1em;
    z-index: 1;
  }
  #rfc\.toc {
    top: 16px;
  }
  ul.toc {
    top: 80px;
    overflow: auto;
  }

  body {
    padding-left: 1.5em;
    padding-right: 29em;
  }
}

body {
  font: 15px "Helvetica Neue",Helvetica,Arial,sans-serif;
  color: #333;
  font-size-adjust: 0.5;
  line-height: 130%;
  margin: 2.5em auto;
  max-width: 724px;
}

.title, .filename, h1, h2, h3, h4 {
  font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
  font-size-adjust: 0.5;
  font-weight: 500;
  color: #333;
  line-height: 100%;
  margin: 0.8em 0 0.3em;
}
.title { font-size: 36px; }
h1 { font-size: 30px; }
h2 { font-size: 24px; }
h3, h4 { font-size: 18px; }
h1 a[href], h2 a[href], h3 a[href], h4 a[href] {
  color: #333;
}

ul.toc li {
  list-style: none;
  text-indent: -2.5em;
  padding-left: 2.5em;
  padding-bottom: 5px;
  margin: 0;
}
ul.toc ul {
  margin: 0;
}
/* xml2rfc nests ul directly inside ul which messes with the style badly */
ul.toc, ul.toc>ul, ul.toc ul>ul {
  margin: 0 0 0 1.5em;
}

table {
  margin-left: 0em;
  border-collapse: collapse;
}
th {
  text-align: left;
  border-bottom: 2px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
  vertical-align: top;
}
tr:nth-child(2n+1) > td,
tr:nth-child(2n+1) > th {
  background-color: #f9f9f9;
}
td.reference {
  max-width: 200px;
  border-top: none;
  padding-right: 1em;
}
.right {
  text-align: right;
}


table.header {
  width: 100%;
}
table.header td {
  border: none;
  background-color: transparent;
  color: black;
}
.filename {
  color: rgb(119, 119, 119);
  font-size: 23px;
  font-weight: normal;
  height: auto;
  line-height: 100%;
}
#rfc\.abstract+p {
  font-size: 20px;
  font-weight: 300;
  line-height: 130%;
}

samp, tt, code, pre {
  font: 11pt consolas, monospace;
  font-size-adjust: none;
}
pre {
  background-color: #eee;
  border: 1px solid #ddd;
  overflow-x: auto;
  padding: 5px;
  margin: 5px;
}
.figure {
  font-style: italic;
  margin: 0 1.5em;
}

address {
  margin: 10px 0 0;
}
.vcard {
  font-style: normal;
}
.vcardline {
  display: block;
}
.vcardline .fn {
  font-weight: bold;
}
.vcardline .hidden {
  display: none;
}

dl {
  margin-left: 1em;
}
dl.dl-horizontal: {
  margin-left: 0;
}
dl > dt {
  float: left;
  margin-right: 1em;
}
dl.nohang > dt {
  float: none;
}
dl > dd {
  margin-bottom: .5em;
}
dl.compact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}
ul.empty {
  list-style-type: none;
}
ul.empty li {
  margin-top: .5em;
}

hr {
  border: 0;
  border-top: 1px solid #eee;
}

a {
  text-decoration: none;
}
a[href] {
  color: #2a6496;
}
a[href]:hover {
  background-color: #eee;
}

ol, ul, li, p {
  padding: 0;
  margin: 0.5em 0 0.5em 2em;
}
li, p {
  margin-left: 0;
}
address {
  font-style: normal;
}

.github-fork-ribbon-wrapper {
  display: none;
}
@media screen and (min-width: 800px) {
  /* "Fork me on GitHub" CSS ribbon based on
   * https://github.com/simonwhitaker/github-fork-ribbon-css
   */
  .github-fork-ribbon {
    position: absolute;
    padding: 2px 0;
    background-color: #a00;
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));
    box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);
    font: 700 12px "Helvetica Neue", Helvetica, Arial, sans-serif;

    pointer-events: auto;

    top: 38px;
    right: -45px;

    transform: rotate(45deg);
  }

  .github-fork-ribbon a[href],
  .github-fork-ribbon a[href]:hover {
    color: #fff;
    background-color: transparent;
    text-decoration: none;
    text-shadow: 0 -1px rgba(0, 0, 0, 0.5);
    text-align: center;

    width: 190px;
    line-height: 18px;

    display: inline-block;
    padding: 2px 0;

    border: 1.5px dotted #fff;
    border-color: rgba(255, 255, 255, 0.6);
  }

  .github-fork-ribbon-wrapper {
    display: block;
    width: 130px;
    height: 130px;
    position: absolute;
    overflow: hidden;
    top: 0; right: 0;
    z-index: 2;
    pointer-events: none;
  }
}
@media screen and (min-width: 1000px) {
  .github-fork-ribbon-wrapper {
    position: fixed;
  }
  /*]]>*/</style>


  <link href="#rfc.toc" rel="Contents"/>
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction"/>
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Terminology"/>
<link href="#rfc.section.2" rel="Chapter" title="2 The BIER Approach"/>
<link href="#rfc.section.3" rel="Chapter" title="3 The Constrained-Cast Approach"/>
<link href="#rfc.section.4" rel="Chapter" title="4 False Positives"/>
<link href="#rfc.section.5" rel="Chapter" title="5 Protocol"/>
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Multicast Listener Advertisement Object (MLAO)"/>
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Routing Header"/>
<link href="#rfc.section.6" rel="Chapter" title="6 Implementation"/>
<link href="#rfc.section.7" rel="Chapter" title="7 Benefits"/>
<link href="#rfc.section.8" rel="Chapter" title="8 Security Considerations"/>
<link href="#rfc.section.9" rel="Chapter" title="9 IANA Considerations"/>
<link href="#rfc.section.9.1" rel="Chapter" title="9.1 ICMPv6 Parameter Registration"/>
<link href="#rfc.section.9.2" rel="Chapter" title="9.2 Critical 6LowPAN Routing Header Type Registration"/>
<link href="#rfc.section.10" rel="Chapter" title="10 Acknowledgments"/>
<link href="#rfc.references" rel="Chapter" title="11 References"/>
<link href="#rfc.references.1" rel="Chapter" title="11.1 Normative References"/>
<link href="#rfc.references.2" rel="Chapter" title="11.2 Informative References"/>
<link href="#rfc.authors" rel="Chapter"/>


  <meta name="generator" content="xml2rfc version 2.5.1 - http://tools.ietf.org/tools/xml2rfc" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />

  <meta name="dct.creator" content="Bergmann, O., Bormann, C., Gerdes, S., and H. Chen" />
  <meta name="dct.identifier" content="urn:ietf:id:draft-ietf-roll-ccast-latest" />
  <meta name="dct.issued" scheme="ISO8601" content="2017-10-30" />
  <meta name="dct.abstract" content="This specification defines a protocol for forwarding multicast traffic in a constrained node network employing the RPL routing protocol in non-storing mode." />
  <meta name="description" content="This specification defines a protocol for forwarding multicast traffic in a constrained node network employing the RPL routing protocol in non-storing mode." />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
  <td class="left">Roll Working Group</td>
  <td class="right">O. Bergmann</td>
</tr>
<tr>
  <td class="left">Internet-Draft</td>
  <td class="right">C. Bormann</td>
</tr>
<tr>
  <td class="left">Intended status: Standards Track</td>
  <td class="right">S. Gerdes</td>
</tr>
<tr>
  <td class="left">Expires: May 3, 2018</td>
  <td class="right">Universit&#228;t Bremen TZI</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">H. Chen</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">Huawei Technologies</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">October 30, 2017</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Constrained-Cast: Source-Routed Multicast for RPL<br />
  <span class="filename">draft-ietf-roll-ccast-latest</span></p>
  
  <h1 id="rfc.abstract">
  <a href="#rfc.abstract">Abstract</a>
</h1>
<p>This specification defines a protocol for forwarding multicast traffic in a constrained node network employing the RPL routing protocol in non-storing mode.</p>
<h1 id="rfc.status">
  <a href="#rfc.status">Status of This Memo</a>
</h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on May 3, 2018.</p>
<h1 id="rfc.copyrightnotice">
  <a href="#rfc.copyrightnotice">Copyright Notice</a>
</h1>
<p>Copyright (c) 2017 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a></li>
<ul><li>1.1.   <a href="#rfc.section.1.1">Terminology</a></li>
</ul><li>2.   <a href="#rfc.section.2">The BIER Approach</a></li>
<li>3.   <a href="#rfc.section.3">The Constrained-Cast Approach</a></li>
<li>4.   <a href="#rfc.section.4">False Positives</a></li>
<li>5.   <a href="#rfc.section.5">Protocol</a></li>
<ul><li>5.1.   <a href="#rfc.section.5.1">Multicast Listener Advertisement Object (MLAO)</a></li>
<li>5.2.   <a href="#rfc.section.5.2">Routing Header</a></li>
</ul><li>6.   <a href="#rfc.section.6">Implementation</a></li>
<li>7.   <a href="#rfc.section.7">Benefits</a></li>
<li>8.   <a href="#rfc.section.8">Security Considerations</a></li>
<li>9.   <a href="#rfc.section.9">IANA Considerations</a></li>
<ul><li>9.1.   <a href="#rfc.section.9.1">ICMPv6 Parameter Registration</a></li>
<li>9.2.   <a href="#rfc.section.9.2">Critical 6LowPAN Routing Header Type Registration</a></li>
</ul><li>10.   <a href="#rfc.section.10">Acknowledgments</a></li>
<li>11.   <a href="#rfc.references">References</a></li>
<ul><li>11.1.   <a href="#rfc.references.1">Normative References</a></li>
<li>11.2.   <a href="#rfc.references.2">Informative References</a></li>
</ul><li><a href="#rfc.authors">Authors' Addresses</a></li>


  </ul>

  <h1 id="rfc.section.1"><a href="#rfc.section.1">1.</a> <a href="#introduction" id="introduction">Introduction</a></h1>
<p id="rfc.section.1.p.1">As defined in <a href="#RFC6550">[RFC6550]</a>, RPL Multicast assumes that the RPL network operates in Storing Mode.  Multicast DAOs are used to indicate subscription to multicast address to a parent; these DAOs percolate up and create bread-crumbs.  This specification, although part of RFC 6550, appears to be incomplete and untested.  More importantly, Storing Mode is not in use in constrained node networks outside research operating environments.</p>
<p id="rfc.section.1.p.2">The present specification addresses multicast forwarding for RPL networks in the much more common Non-Storing Mode.  Non-Storing is based on the root node adding source-routing information to downward packets.  Evidently, to make this work, RPL multicast needs to source-route multicast packets.  A source route here is a list of identifiers to instruct forwarders to relay the respective IP datagram.</p>
<p id="rfc.section.1.p.3">As every forwarder in an IP-based constrained node network has at least one network interface, it is straight-forward to use the address of an outgoing interface as identifiers in this source-route. (Typically, this is a globally unique public address of the node&#8217;s only network adapter.)</p>
<p id="rfc.section.1.p.4">The source-route subsets the whole set of potential forwarders available in the RPL DODAG to those that need to forward in order to reach known multicast listeners.</p>
<p id="rfc.section.1.p.5">Including an actual list of outgoing interfaces is rarely applicable, as this is likely to be a large list of 16-byte IPv6 addresses.  Even with <a href="#RFC6554">[RFC6554]</a> style compression, the size of the list becomes prohibitively quickly.</p>
<h1 id="rfc.section.1.1"><a href="#rfc.section.1.1">1.1.</a> <a href="#terminology" id="terminology">Terminology</a></h1>
<p id="rfc.section.1.1.p.1">The key words &#8220;MUST&#8221;, &#8220;MUST NOT&#8221;, &#8220;REQUIRED&#8221;, &#8220;SHALL&#8221;, &#8220;SHALL NOT&#8221;, &#8220;SHOULD&#8221;, &#8220;SHOULD NOT&#8221;, &#8220;RECOMMENDED&#8221;, &#8220;NOT RECOMMENDED&#8221;, &#8220;MAY&#8221;, and &#8220;OPTIONAL&#8221; in this document are to be interpreted as described in BCP 14 <a href="#RFC2119">[RFC2119]</a> <a href="#RFC8174">[RFC8174]</a> when, and only when, they appear in all capitals, as shown here.</p>
<p id="rfc.section.1.1.p.2">In this specification, the term &#8220;byte&#8221; is used in its now customary sense as a synonym for &#8220;octet&#8221;.</p>
<p id="rfc.section.1.1.p.3">All multi-byte integers in this protocol are interpreted in network byte order.</p>
<h1 id="rfc.section.2"><a href="#rfc.section.2">2.</a> <a href="#the-bier-approach" id="the-bier-approach">The BIER Approach</a></h1>
<p id="rfc.section.2.p.1">Bit-Indexed Explicit Replication <a href="#I-D.ietf-bier-architecture">[I-D.ietf-bier-architecture]</a> lists all egress routers in a bitmap included in each multicast packet.  This requires creating a mostly contiguous numbering of all egress routers; more importantly, BIER requires the presence of a network map in each forwarders to be able to interpret the bitmap and map it to a set of local outgoing interfaces.</p>
<h1 id="rfc.section.3"><a href="#rfc.section.3">3.</a> <a href="#the-constrained-cast-approach" id="the-constrained-cast-approach">The Constrained-Cast Approach</a></h1>
<p id="rfc.section.3.p.1">Constrained-Cast employs Bloom Filters <a href="#BLOOM">[BLOOM]</a> as a compact representation of a match or non-match for elements in a large set: Each element to be included is hashed with multiple hash functions; the result is used to index a bitmap and set the corresponding bit.  To check for the presence of an element, the same hash functions are applied to obtain bit positions; if all corresponding bits are set, this is used to indicate a match.  (Multiple hash functions are most easily obtained by adding a varying seed value to a single hash algorithm.)</p>
<p id="rfc.section.3.p.2">By including a bloom filter in each packet that matches all outgoing interfaces that need to forward the packet, each forwarder can efficiently decide whether (and on which interfaces) to forward the packet.</p>
<h1 id="rfc.section.4"><a href="#rfc.section.4">4.</a> <a href="#false-positives" id="false-positives">False Positives</a></h1>
<p id="rfc.section.4.p.1">Bloom filters are probabilistic.  A false positive might be indicating a match where the bits are set by aliasing of the hash values.  In case of Constrained-Cast, this causes spurious transmission and wastes some energy and radio bandwidth.  However, there is no semantic damage (hosts still filter out unneeded multicasts).  The total waste in energy and spectrum can be visualized as the false-positive-rate multiplied by the density of the RPL network.  A network can easily live with a significant percentage of false positives.  By changing the set of hash functions (i.e., seed) over time, the root can avoid a single node with a false positive to become an unnecessary hotspot for that multicast group.</p>
<h1 id="rfc.section.5"><a href="#rfc.section.5">5.</a> <a href="#protocol" id="protocol">Protocol</a></h1>
<p id="rfc.section.5.p.1">The protocol uses DAO-like &#8220;MLAO&#8221; messages to announce membership to the root as specified in <a href="#mlao">Section 5.1</a>.</p>
<p id="rfc.section.5.p.2">For downward messages, the root adds a new routing header that includes a hash function identifier and a seed value; another one of its fields gives the number of hash functions (k) to ask for k instances of application of the hash function, with increasing seed.  The format of the new routing header is specified in <a href="#rh">Section 5.2</a>.</p>
<p id="rfc.section.5.p.3">Typical sizes of the bloom filter bitmap that the root inserts into the packet can be 64, 128, or 256 bit, which may lead to acceptable false positive rates if the total number of forwarders in the 10s and 100s.  (To do: write more about the math here.  Note that this number tallies forwarding routers, not end hosts.)</p>
<p id="rfc.section.5.p.4">A potential forwarder that receives a multicast packet adorned with a constrained-cast routing header first checks that the packet is marked with a RPL rank smaller than its own (loop prevention).  If yes, it then forwards the packet to all outgoing interfaces that match the bloom filter in the packet.</p>
<h1 id="rfc.section.5.1"><a href="#rfc.section.5.1">5.1.</a> <a href="#mlao" id="mlao">Multicast Listener Advertisement Object (MLAO)</a></h1>
<p id="rfc.section.5.1.p.1">The header format of the MLAO is depicted in <a href="#target-option">Figure 1</a>.  The basic structure of the MLAO message is similar to the RPL Destination Advertisement Object (DAO). In particular, it starts with RPL ICMP base header with a type value of 155 and the code {IANA TBD1} (MLAO), followed by the Checksum, RPLInstanceID, parameters and flags as in a DAO.  </p>
<div id="rfc.figure.1"/>
<div id="target-option"/>
<pre>
        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |   Type = 0x05 | Option Length |   Reserved    | Prefix Length |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

       +                                                               +
       |                     Group Address                             |
       .                                                               .
       .                                                               .
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Figure 1: RPL Target Option for MLAO</p>
<p id="rfc.section.5.1.p.2">The group address field indicates the group that the sender of the MLAO is interested in. This field usually contains a 128 bit IPv6 multicast group address. Shorter group identifiers could be used together with a protocol for explicit creation of groups.  The MLAO message must have at least one RPL target option to specify the address of the listener that has generated the MLAO. The message is directed to the global unicast address of the DODAG root and travels upwards the routing tree.</p>
<p/>

<dl>
  <dt>Note:</dt>
  <dd style="margin-left: 8">It has been suggested to use the RPL Transit Option (Type 0x06) instead as it is used in Non-Storing mode to inform the DODAG root of path attributes.  Specifically, this option can be used to limit the subscription by providing a proper Path Lifetime.</dd>
</dl>
<h1 id="rfc.section.5.2"><a href="#rfc.section.5.2">5.2.</a> <a href="#rh" id="rh">Routing Header</a></h1>
<p id="rfc.section.5.2.p.1">This specification uses a new Soure Routing 6LowPAN Routing Header (SRH-6LoRH) type <a href="#RFC8138">[RFC8138]</a> to convey the Bloom filter that describes the source route for the IPv6 multicast packet to take within the RPL routing tree. The 6LoRH Type for this Constrained Cast Routing Header (CCRH) is set to 7. <a href="#rh-format">Figure 2</a> depicts the format of this new routing header.</p>
<div id="rfc.figure.2"/>
<div id="rh-format"/>
<pre>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |1|0|0|rsv|BSize| 6LoRH Type 7  | Func set      |    Modulus    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Sequence Number                                              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   .                                                               .
   .                       Filter data                             .
   .                                                               .
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre>
<p class="figure">Figure 2: Routing header</p>
<p/>

<dl>
  <dt>rsv: This field is reserved for future use an MUST be set to 0 when</dt>
  <dd style="margin-left: 8">sending a packet containing a CCRH. A receiver MUST ignore the value of the rsv field.</dd>
  <dt>BSize:</dt>
  <dd style="margin-left: 8">Specifies the size of the included Bloom filter. Currently, only 64 bits, 128 bits, or 256 bits are supported. The BSize field is encoded as specified in <a href="#rh-bsize">Table 1</a>.</dd>
</dl>
<div id="rfc.table.1"/>
<div id="rh-bsize"/>
<table cellpadding="3" cellspacing="0" class="tt full center">
  <caption>Possible Bloom Filter Lengths</caption>
  <thead>
    <tr>
      <th class="left">BSize value</th>
      <th class="left">Filter Size (Bits)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="left">0</td>
      <td class="left">64</td>
    </tr>
    <tr>
      <td class="left">1</td>
      <td class="left">128</td>
    </tr>
    <tr>
      <td class="left">2</td>
      <td class="left">256</td>
    </tr>
  </tbody>
</table>
<p/>

<dl>
  <dt>Func set:</dt>
  <dd style="margin-left: 8">The set of hash functions used to generate the Filter data value.</dd>
</dl>
<p id="rfc.section.5.2.p.4">Note: As the function set contains a combination of several distinct hash functions, it is currently unclear if 8 bits number space is large enough.</p>
<p/>

<dl>
  <dt>Modulus:</dt>
  <dd style="margin-left: 8">The modulus that is used by the hash functions, minus 64 (the minimum filter data size that can be used).  The DAG root chooses the modulus (and thus the filter data size) to achieve its objectives for false positive rates (<a href="#false-positives">Section 4</a>).</dd>
  <dt>Sequence Number:</dt>
  <dd style="margin-left: 8">32 bits sequence number. The number space is unique for a sequence of multicast datagrams for a specific group that arrive at the DAG root on their way up.  The DAG root increments the number for each datagram it sends down the respective DODAG.</dd>
  <dt>Filter data:</dt>
  <dd style="margin-left: 8">A bit field that indicates which nodes should relay this multicast datagram. The length of this field is a multiple of 8 bytes (2^(BSize + 3) bytes). The actual length is derived from the contents of the field BSize.</dd>
</dl>
<h1 id="rfc.section.6"><a href="#rfc.section.6">6.</a> <a href="#implementation" id="implementation">Implementation</a></h1>
<p id="rfc.section.6.p.1">In 2013, Constrained-Cast was implemented in Contiki.  It turns out that forwarders can compute the hash functions once for their outgoing interfaces and then cache them, simply bit-matching their outgoing interface hash bits against the bloom filter in the packet (a match is indicated when all bits in the outgoing interface hash are set in the bloom filter).</p>
<p id="rfc.section.6.p.2">The Root computes the tree for each multicast group, computes the bloom filter for it, caches these values, and then simply adds the bloom filter routing header to each downward packet.  For adding a new member, the relevant outgoing interfaces are simply added to the bloom filter.  For removing a leaving member, however, the bloom filter needs to be recomputed (which can be sped up logarithmically if desired).</p>
<h1 id="rfc.section.7"><a href="#rfc.section.7">7.</a> <a href="#benefits" id="benefits">Benefits</a></h1>
<p id="rfc.section.7.p.1">Constrained-Cast:</p>
<p/>

<ul>
  <li>operates in Non-Storing Mode, with the simple addition of a membership information service;</li>
  <li>performs all routing decisions at the root.</li>
</ul>
<p id="rfc.section.7.p.3">Further optimizations might include using a similar kind of bloom filter routing header for unicast forwarding as well (representing, instead of the outgoing interface list, a list of children that forwarding parents need to forward to).</p>
<h1 id="rfc.section.8"><a href="#rfc.section.8">8.</a> <a href="#security-considerations" id="security-considerations">Security Considerations</a></h1>
<p id="rfc.section.8.p.1">TODO</p>
<h1 id="rfc.section.9"><a href="#rfc.section.9">9.</a> <a href="#iana-considerations" id="iana-considerations">IANA Considerations</a></h1>
<p id="rfc.section.9.p.1">The following registrations are done following the procedure specified in <a href="#RFC6838">[RFC6838]</a>.</p>
<p id="rfc.section.9.p.2">Note to RFC Editor: Please replace all occurrences of &#8220;[RFC-XXXX]&#8221; with the RFC number of this specification and &#8220;IANA TBD1&#8221; with the code selected for TBD1 below.</p>
<h1 id="rfc.section.9.1"><a href="#rfc.section.9.1">9.1.</a> <a href="#icmpv6-parameter-registration" id="icmpv6-parameter-registration">ICMPv6 Parameter Registration</a></h1>
<p id="rfc.section.9.1.p.1">IANA is requested to add the following entry to the Code fields of the RPL Control Codes registry:</p>
<table cellpadding="3" cellspacing="0" class="tt full center">
  <thead>
    <tr>
      <th class="center">Code</th>
      <th class="left">Name</th>
      <th class="left">Reference</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="center">TBD1</td>
      <td class="left">MLAO</td>
      <td class="left">[RFC-XXXX]</td>
    </tr>
  </tbody>
</table>
<h1 id="rfc.section.9.2"><a href="#rfc.section.9.2">9.2.</a> <a href="#critical-6lowpan-routing-header-type-registration" id="critical-6lowpan-routing-header-type-registration">Critical 6LowPAN Routing Header Type Registration</a></h1>
<p id="rfc.section.9.2.p.1">IANA is requested to add the following entries to the Critical 6LowPAN Routing Header Type Registration registry:</p>
<table cellpadding="3" cellspacing="0" class="tt full center">
  <thead>
    <tr>
      <th class="center">Value</th>
      <th class="left">Name</th>
      <th class="left">Reference</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="center">7</td>
      <td class="left">CCast Routing Header</td>
      <td class="left">[RFC-XXXX]</td>
    </tr>
  </tbody>
</table>
<h1 id="rfc.section.10"><a href="#rfc.section.10">10.</a> <a href="#acknowledgments" id="acknowledgments">Acknowledgments</a></h1>
<p id="rfc.section.10.p.1">Thanks to Yasuyuki Tanaka for valuable comments.</p>
<p id="rfc.section.10.p.2">This work has been supported by Siemens Corporate Technology.</p>
<h1 id="rfc.references"><a href="#rfc.references">11.</a> References</h1>
<h1 id="rfc.references.1"><a href="#rfc.references.1">11.1.</a> Normative References</h1>
<table>
  <tbody>
    <tr>
      <td class="reference">
        <b id="RFC2119">[RFC2119]</b>
      </td>
      <td class="top"><a>Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC6550">[RFC6550]</b>
      </td>
      <td class="top"><a>Winter, T.</a>, <a>Thubert, P.</a>, <a>Brandt, A.</a>, <a>Hui, J.</a>, <a>Kelsey, R.</a>, <a>Levis, P.</a>, <a>Pister, K.</a>, <a>Struik, R.</a>, <a>Vasseur, JP.</a> and <a>R. Alexander</a>, "<a href="http://tools.ietf.org/html/rfc6550">RPL: IPv6 Routing Protocol for Low-Power and Lossy Networks</a>", RFC 6550, DOI 10.17487/RFC6550, March 2012.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC8138">[RFC8138]</b>
      </td>
      <td class="top"><a>Thubert, P.</a>, <a>Bormann, C.</a>, <a>Toutain, L.</a> and <a>R. Cragie</a>, "<a href="http://tools.ietf.org/html/rfc8138">IPv6 over Low-Power Wireless Personal Area Network (6LoWPAN) Routing Header</a>", RFC 8138, DOI 10.17487/RFC8138, April 2017.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC8174">[RFC8174]</b>
      </td>
      <td class="top"><a>Leiba, B.</a>, "<a href="http://tools.ietf.org/html/rfc8174">Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</a>", BCP 14, RFC 8174, DOI 10.17487/RFC8174, May 2017.</td>
    </tr>
  </tbody>
</table>
<h1 id="rfc.references.2"><a href="#rfc.references.2">11.2.</a> Informative References</h1>
<table>
  <tbody>
    <tr>
      <td class="reference">
        <b id="BLOOM">[BLOOM]</b>
      </td>
      <td class="top"><a>Bloom, B.</a>, "<a href="http://doi.acm.org/10.1145/362686.362692">Space/time trade-offs in hash coding with allowable errors</a>", ISSN 0001-0782, ACM Press Communications of the ACM vol 13 no 7 pp 422-426, 1970.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="I-D.ietf-bier-architecture">[I-D.ietf-bier-architecture]</b>
      </td>
      <td class="top"><a>Wijnands, I.</a>, <a>Rosen, E.</a>, <a>Dolganow, A.</a>, <a>Przygienda, T.</a> and <a>S. Aldrin</a>, "<a href="http://tools.ietf.org/html/draft-ietf-bier-architecture-08">Multicast using Bit Index Explicit Replication</a>", Internet-Draft draft-ietf-bier-architecture-08, September 2017.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC6554">[RFC6554]</b>
      </td>
      <td class="top"><a>Hui, J.</a>, <a>Vasseur, JP.</a>, <a>Culler, D.</a> and <a>V. Manral</a>, "<a href="http://tools.ietf.org/html/rfc6554">An IPv6 Routing Header for Source Routes with the Routing Protocol for Low-Power and Lossy Networks (RPL)</a>", RFC 6554, DOI 10.17487/RFC6554, March 2012.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC6838">[RFC6838]</b>
      </td>
      <td class="top"><a>Freed, N.</a>, <a>Klensin, J.</a> and <a>T. Hansen</a>, "<a href="http://tools.ietf.org/html/rfc6838">Media Type Specifications and Registration Procedures</a>", BCP 13, RFC 6838, DOI 10.17487/RFC6838, January 2013.</td>
    </tr>
  </tbody>
</table>
<h1 id="rfc.authors">
  <a href="#rfc.authors">Authors' Addresses</a>
</h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Olaf Bergmann</span> 
	  <span class="n hidden">
		<span class="family-name">Bergmann</span>
	  </span>
	</span>
	<span class="org vcardline">Universit&#228;t Bremen TZI</span>
	<span class="adr">
	  <span class="vcardline">Postfach 330440</span>

	  <span class="vcardline">
		<span class="locality">Bremen</span>,  
		<span class="region"></span>
		<span class="code">D-28359</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">Phone: +49-421-218-63904</span>

<span class="vcardline">EMail: <a href="mailto:bergmann@tzi.org">bergmann@tzi.org</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Carsten Bormann</span> 
	  <span class="n hidden">
		<span class="family-name">Bormann</span>
	  </span>
	</span>
	<span class="org vcardline">Universit&#228;t Bremen TZI</span>
	<span class="adr">
	  <span class="vcardline">Postfach 330440</span>

	  <span class="vcardline">
		<span class="locality">Bremen</span>,  
		<span class="region"></span>
		<span class="code">D-28359</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">Phone: +49-421-218-63921</span>

<span class="vcardline">EMail: <a href="mailto:cabo@tzi.org">cabo@tzi.org</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Stefanie Gerdes</span> 
	  <span class="n hidden">
		<span class="family-name">Gerdes</span>
	  </span>
	</span>
	<span class="org vcardline">Universit&#228;t Bremen TZI</span>
	<span class="adr">
	  <span class="vcardline">Postfach 330440</span>

	  <span class="vcardline">
		<span class="locality">Bremen</span>,  
		<span class="region"></span>
		<span class="code">D-28359</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">Phone: +49-421-218-63906</span>

<span class="vcardline">EMail: <a href="mailto:gerdes@tzi.org">gerdes@tzi.org</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Hao Chen</span> 
	  <span class="n hidden">
		<span class="family-name">Chen</span>
	  </span>
	</span>
	<span class="org vcardline">Huawei Technologies</span>
	<span class="adr">
	  <span class="vcardline">12, E. Mozhou Rd</span>

	  <span class="vcardline">
		<span class="locality">Nanjing</span>,  
		<span class="region"></span>
		<span class="code">211111</span>
	  </span>
	  <span class="country-name vcardline">China</span>
	</span>
	<span class="vcardline">Phone: +86-25-5662-7052</span>

<span class="vcardline">EMail: <a href="mailto:philips.chenhao@huawei.com">philips.chenhao@huawei.com</a></span>

  </address>
</div>

</body>
</html>
